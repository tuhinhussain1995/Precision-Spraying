<div style="width: 100%;" [style.height]="screenHeight">
    <div style="height: 45%;">
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; position: relative;">
            <div class="overlay">Live Cam</div>
            <video #video autoplay playsinline height="100%"></video>
            <canvas #canvas id="canvas" style="display: none;"></canvas>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Captured Image</div>
            <div *ngIf="responseReceived" style="margin: auto;">
                <img *ngIf="uploadedImage" [src]="uploadedImage" alt="Uploaded Image" height="100%" width="100%">
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Detected Pests/Diseases/Weeds</div>
            <div *ngIf="responseReceived" style="margin: auto;">
                <img [src]="imageUrl" alt="Uploaded Image" height="100%" width="100%">
            </div>
        </mat-card>
    </div>
    

    <div style="height: 45%; margin-top: 15px;">
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; position: relative;">
            <div class="overlay">Console</div>
            <div *ngIf="responseReceived" style="margin: auto;" #scrollContainer class="inner-div">
                <span *ngFor="let console of consoleValue">
                    <p class="console-style">Current Frame No: {{ console.current_frame_no }}</p>
                    <p class="console-style">Current Area No: {{ console.current_area_no }}</p>
                    
                    <span *ngIf="console.class_names">
                        <p class="console-style">Class Names: 
                            <span *ngIf="console.class_names == 'pest_grasshopper'" style="font-weight: bold;" [style.color]="console.color">
                                {{ console.class_names }}
                            </span>
                            <span *ngIf="console.class_names != 'pest_grasshopper'"  [style.color]="console.color">
                                {{ console.class_names }}
                            </span>
                        </p>
                        <p class="console-style">Object Locations: 
                            <span *ngIf="console.object_locations.length > 1">
                                <span *ngFor="let location of console.object_locations">
                                    [{{ location }}],
                                </span>
                            </span>
                            <span *ngIf="console.object_locations.length == 1">
                                [{{ console.object_locations }}]
                            </span>
                        </p>
                    </span>

                    <span *ngIf="!console.class_names">
                        <p class="console-style">Nothing Detected</p>
                    </span>

                    <hr>
                </span>
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Detection Overall Result</div>
            <div *ngIf="responseReceived"  class="overall-result-div">
                <p>Started at: {{ detection_started_time | date:'medium' }}</p>
                <p>Current Frame No: {{ current_frame_no }}</p>
                <p>Total Area Covered: {{ total_area_covered }}</p>
                <p *ngIf="detection_end_time">Ended at: {{ detection_end_time | date:'medium' }}</p>
                <hr>
                <div *ngFor="let item of countedDetectedClasses">
                    <p>{{ getKey(item) }}: {{ item[getKey(item)] }}</p>
                </div>
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Precision Spraying Result</div>
            <div *ngIf="responseReceived" style="margin: auto;" #scrollContainer1 class="spraying-result-div">
                <span *ngFor="let console of sprayingResult">
                    <p class="spraying-console-style">Current Frame No: {{ console.current_frame_no }}</p>
                    <p class="spraying-console-style">Current Area No: {{ console.current_area_no }}</p>
                    <p class="spraying-console-style">Class Names: 
                        <span *ngIf="console.class_names == 'pest_grasshopper'" style="font-weight: bold;" [style.color]="console.color">
                            {{ console.class_names }}
                        </span>
                        <span *ngIf="console.class_names != 'pest_grasshopper'" [style.color]="console.color">
                            {{ console.class_names }}
                        </span>
                    </p>
                    <p class="spraying-console-style">Object Locations: 
                        <span *ngIf="console.object_locations.length > 1">
                            <span *ngFor="let location of console.object_locations">
                                [{{ location }}],
                            </span>
                        </span>
                        <span *ngIf="console.object_locations.length == 1">
                            [{{ console.object_locations }}]
                        </span>
                    </p>
                    <hr>
                </span>
            </div>
        </mat-card>
    </div>

    <div style="height: calc(10% - 15px);">
        <button *ngIf="!onProcess" (click)="startProcess()">Take Picture</button>
        <button *ngIf="onProcess" (click)="stopCamera()">Stop Camera</button>
    </div>
</div>


