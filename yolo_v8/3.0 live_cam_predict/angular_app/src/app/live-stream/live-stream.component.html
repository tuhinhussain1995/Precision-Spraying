<div style="width: 100%;" [style.height]="screenHeight">
    <div style="height: 44%;">
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; position: relative;">
            <div class="overlay">
                <span class="blinking-dot" [style.visibility]="dotVisible ? 'visible' : 'hidden'"></span>
                Live Cam
              </div>
              
            <video #video autoplay playsinline height="100%"></video>
            <canvas #canvas id="canvas" style="display: none;"></canvas>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Captured Image</div>
            <div *ngIf="responseReceived" style="margin: auto;">
                <img *ngIf="uploadedImage" [src]="uploadedImage" alt="Uploaded Image" height="100%" width="100%">
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Detected Pests/Diseases/Weeds</div>
            <div *ngIf="responseReceived" style="margin: auto;">
                <img [src]="imageUrl" alt="Uploaded Image" height="100%" width="100%">
            </div>
        </mat-card>
    </div>
    

    <div style="height: 45%; margin-top: 20px;">
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; position: relative;">
            <div class="overlay">Console</div>
            <div *ngIf="responseReceived" style="margin: auto;" #scrollContainer class="inner-div">
                <span *ngFor="let console of consoleValue">
                    <p class="console-style">Current Frame No: {{ console.current_frame_no }}</p>
                    <p class="console-style">Current Area No: {{ console.current_area_no }}</p>
                    
                    <span *ngIf="console.class_names">
                        <p class="console-style">Class Names: 
                            <span *ngIf="console.class_names == 'pest_grasshopper'" style="font-weight: bold;" [style.color]="console.color">
                                {{ console.class_names }}
                            </span>
                            <span *ngIf="console.class_names != 'pest_grasshopper'"  [style.color]="console.color">
                                {{ console.class_names }}
                            </span>
                        </p>
                        <p class="console-style">Object Locations: 
                            <span *ngIf="console.object_locations.length > 1">
                                <span *ngFor="let location of console.object_locations">
                                    [{{ location }}],
                                </span>
                            </span>
                            <span *ngIf="console.object_locations.length == 1">
                                [{{ console.object_locations }}]
                            </span>
                        </p>
                    </span>

                    <span *ngIf="!console.class_names">
                        <p class="console-style">Nothing Detected</p>
                    </span>

                    <hr>
                </span>
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Detection Overall Result</div>
            <div *ngIf="responseReceived"  class="overall-result-div">
                <p>Started at: {{ detection_started_time | date:'medium' }}</p>
                <p>Current Frame No: {{ current_frame_no }}</p>
                <p>Total Area Covered: {{ total_area_covered }}</p>
                <p *ngIf="detection_end_time">Ended at: {{ detection_end_time | date:'medium' }}</p>
                <hr>
                <div *ngFor="let item of countedDetectedClasses">
                    <p>{{ getKey(item) }}: {{ item[getKey(item)] }}</p>
                </div>
            </div>
        </mat-card>
        <mat-card style="height: 100%; width: calc(33.33% - 10px); float: left; margin-left: 15px; position: relative;">
            <div class="overlay">Precision Spraying Result</div>
            <div *ngIf="responseReceived" style="margin: auto;" #scrollContainer1 class="spraying-result-div">
                <mat-card class="inner-mat-card" *ngFor="let console of sprayingResult" style="margin-bottom: 15px !important; padding: 10px !important; padding-bottom: 15px;">
                    <p class="spraying-console-style">Current Frame No: {{ console.current_frame_no }}</p>
                    <p class="spraying-console-style">Current Area No: {{ console.current_area_no }}</p>
                    <p class="spraying-console-style">Class Names: 
                        <span *ngIf="console.class_names == 'pest_grasshopper'" style="font-weight: bold;" [style.color]="console.color">
                            {{ console.class_names }}
                        </span>
                        <span *ngIf="console.class_names != 'pest_grasshopper'" [style.color]="console.color">
                            {{ console.class_names }}
                        </span>
                    </p>
                    <p class="spraying-console-style">Object Locations: 
                        <span *ngIf="console.object_locations.length > 1">
                            <span *ngFor="let location of console.object_locations">
                                [{{ location }}],
                            </span>
                        </span>
                        <span *ngIf="console.object_locations.length == 1">
                            [{{ console.object_locations }}]
                        </span>
                    </p>
                    <p *ngIf="console.need_to_spray_chemical" class="spraying-console-style" style="font-weight: bold;">{{ console.chemical_name }}</p>

                    <div style="width: 100%; margin-top: -5px;" *ngIf="console.need_to_spray_chemical">
                        <div style="width: 20px; float: left; height: 20px !important;">
                            <mat-icon style="font-size: 20px; margin-top: 10px !important;" [style.color]="console.color">gps_fixed</mat-icon>
                        </div>
                        <div style="width: calc(96% - 20px); float: left;">
                            <div style="width: 100%; margin-top: 11px; padding-left: 4px;">
                                <p  class="spraying-console-style" style="font-weight: bold;">
                                    {{ console.chemical_group_name }}
                                </p>
                            </div>
                        </div>
                    </div>
                </mat-card>
            </div>
        </mat-card>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center; height: calc(10% - 15px); padding-top: 20px !important;">
        <div>
            <button *ngIf="!onProcess" (click)="startProcess()" mat-flat-button color="primary">
                <mat-icon>videocam</mat-icon> Start Live Streaming
            </button>
            
            <button *ngIf="onProcess" (click)="stopCamera()" mat-flat-button color="warn">
                <mat-icon>videocam_off</mat-icon> Stop Live Streaming
            </button>
    
            <button *ngIf="resetWholeProcess" (click)="resetWholeProcessNow()" mat-flat-button color="accent" style="margin-left: 10px;">
                <mat-icon>restore</mat-icon> Reset Whole Process
            </button>
        </div>
    
        <div style="display: flex; justify-content: flex-end; margin-top: 5px;">
            <div style="width: 240px; margin-top: 4px;">
                <div style="float: left;">
                    <label for="totalRows" style="font-weight: bold;">Total Area: </label>
                    <input type="number" id="totalRows" [(ngModel)]="totalRows" style="width: 50px; text-align: center; margin-left: 3px;" [disabled]="resetWholeProcess" maxlength="4">
                </div>
                <div style="margin-left: 4px; float: left;">
                    <label for="totalColumns" style="margin-right: 3px;">m x </label>
                    <input type="number" id="totalColumns" [(ngModel)]="totalColumns" style="width: 50px; text-align: center;" [disabled]="resetWholeProcess" maxlength="4">
                    m
                </div>
            </div>

            <button *ngIf="!resetWholeProcess" (click)="applyArea()" mat-flat-button color="primary" style="margin-left: 10px;">
                <mat-icon> map</mat-icon> Apply Area
            </button>

            <button (click)="toggleFullscreen()" color="accent" style="margin-left: 10px; width: 35px; height: 35px; border-radius: 6px; background-color: rgb(12, 147, 180); border: 1px solid rgb(12, 147, 180);">
                <mat-icon style="font-size: 30px; margin-left: -7px !important; color: white;">{{ isFullScreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
            </button>


            <button (click)="openDialog()" style="margin-left: 10px; width: 35px; height: 35px; border-radius: 6px; background-color: rgb(12, 147, 180); border: 1px solid rgb(12, 147, 180);">
                <mat-icon style="font-size: 25px; margin-top: 3px !important; margin-left: -1.5px !important; color: white;">perm_device_information</mat-icon>
            </button>
            
        </div>
    </div>
    
    
</div>


